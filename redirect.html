<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script>
    // Get the code from the URL path
    const code = window.location.pathname.replace("/", "").toUpperCase();

    // Get all saved links
    const allLinks = JSON.parse(localStorage.getItem("shortLinks") || "{}");

    let longUrl = null;

    // Search all usersâ€™ links
    for (let email in allLinks) {
      const userLinks = allLinks[email];
      const found = userLinks.find(link => link.code === code);

      if (found) {
        longUrl = found.long;
        break;
      }
    }

    // Redirect if found
    if (longUrl) {
      window.location.href = longUrl;
    } else {
      document.body.innerHTML = "<h2 style='color:white;'>Invalid short URL</h2>";
    }
  </script>
</head>
<body style="background:black;color:white;font-family:sans-serif;">
  <h2>Redirecting...</h2>
</body>
</html>
 